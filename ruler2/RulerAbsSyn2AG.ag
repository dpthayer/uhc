-------------------------------------------------------------------------
-- Ruler AST, pass 2
-------------------------------------------------------------------------

-------------------------------------------------------------------------
-- Declarations
-------------------------------------------------------------------------

DATA Decl
  | RsVw                decl        : RsVwDecl

TYPE Decls = [Decl]

DATA RsVwDecl
  | Rs                  nm          : {Nm}
                        scNm        : {Nm}
                        inclVwS     : {Set.Set Nm}
                        descr       : {String}
                        vwDecls     : VwDecls
  | Grp                 nm          : {Nm}
                        scNm        : {Nm}
                        inclVwS     : {Set.Set Nm}
                        descr       : {String}
                        rlNms       : {[(Nm,Nm)]}

TYPE RsVwDecls = [RsVwDecl]

DATA VwDecl
  | Vw                  nm          : {Nm}
                        rlDecls     : RlDecls

TYPE VwDecls = [VwDecl]

DATA RlDecl
  | Rl                  nm          : {Nm}
                        pos         : {SPos}
                        mbAGStr     : {Maybe String}
                        inclVwS     : {Set.Set Nm}
                        preJds      : Jds
                        postJds     : Jds

TYPE RlDecls = [RlDecl]

DATA Jd
  | Ats                 nm          : {Nm}
                        scNm        : {Nm}
                        ats         : JdAts
  | AG                  nm          : {Nm}
                        scNm        : {Nm}
                        arule       : ARule
  | Expr                nm          : {Nm}
                        scNm        : {Nm}
                        expr        : Expr

TYPE Jds = [Jd]

DATA JdAt
  | At                  nm          : {Nm}
                        expr        : Expr

TYPE JdAts = [JdAt]

SET AllDecl
  = Decl Decls
    -- RsDecl RsDecls
    RsVwDecl RsVwDecls
    VwDecl VwDecls
    RlDecl RlDecls
    Jd Jds
    JdAt JdAts

-------------------------------------------------------------------------
-- Sets of AST data's
-------------------------------------------------------------------------

SET AllAS2 = AllDecl
