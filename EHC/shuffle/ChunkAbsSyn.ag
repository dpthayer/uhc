-------------------------------------------------------------------------
-- Chunk files AST
-------------------------------------------------------------------------

-- Outside itf
DATA AGItf
  | AGItf               dumLines    : Lines
                        chunks      : Chunks

-- Chunk
DATA Chunk
  | Ver                 version     : {Version}
                        subNm       : {Nm}
                        minusL      : {[ChunkId]}
                        chOptions	: ChunkOptions
                        mbModNm     : {Maybe String}
                        imports     : {[String]}
                        exports     : {[String]}
                        lines       : Lines
                        dumLines    : Lines
  | Named               cref        : {CRef}
                        lines       : Lines
                        dumLines    : Lines

TYPE Chunks     = [Chunk]

SET AllChunk    = Chunk Chunks

-- ChunkOption
DATA ChunkOption
  | Kind				chKind      : {ChKind}
  | Dest				chDest      : {ChDest}
  | Wrap				chWrap      : {ChWrap}

TYPE ChunkOptions     	= [ChunkOption]

SET AllChunkOption		= ChunkOption ChunkOptions

-- Single line
DATA Line
  | AsIs                words       : Words
  | Named               cref        : {CRef}
  | Group               extraLine   : Int
                        chOptions	: ChunkOptions
                        userRef     : {Maybe (Nm,Maybe String)}
                        lines       : Lines

TYPE Lines      = [Line]

SET AllLine     = Line Lines

-- Single word
DATA Word
  | White               chars       : {String}
  | Black               chars       : {String}
  | Inline              inl         : Inline

DATA Inline
  | URI                 str         : {String}

TYPE Words      = [Word]

SET AllWord     = Word Words Inline

-- Sets
SET AllNT       = AllWord AllLine AllChunk

